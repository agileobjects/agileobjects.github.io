(function(n){"use strict";function e(){i=u.is(":hidden")?!1:!0}function o(){var t=r.scrollTop(),i=n(document).height(),u=r.height();return Math.ceil(t/(i-u)*1e4)/1e4}var r=n(window),f=n("body"),u=n("#menu-toggle"),t=n("#back-to-top"),i=!1;n(document).ready(function(){e();u.click(function(n){f.toggleClass("menu--opened");u.blur();n.preventDefault()});r.on("resize orientationchange",function(){e();i===!1&&f.removeClass("menu--opened")});i===!0&&t.initCanvas();t.click(function(t){n("html, body").animate({scrollTop:0});t.preventDefault()});r.on("resize scroll",function(){i===!0?t.initCanvas():(t.hide(),t.find("canvas").remove())})});n.fn.initCanvas=function(){function e(n,r,u){t.clearRect(-i.size/2,-i.size/2,i.size,i.size);t.lineWidth=u;t.lineCap="round";t.beginPath();t.arc(0,0,(i.size-u)/2,0,Math.PI*2,!1);t.strokeStyle=r;t.stroke();t.closePath();t.beginPath();t.arc(0,0,(i.size-u)/2,0,Math.PI*2*f,!1);t.strokeStyle=n;t.stroke();t.closePath()}var r=n(this),u=document.createElement("canvas");if(u.getContext){var t=u.getContext("2d"),i={lineWidth:2,rotate:0,size:r.height(),colorProgress:"#d4a259",colorBackground:"#eee"},f=o();r.find("canvas").remove();f<.1&&r.css("opacity")!==0?r.stop().fadeOut(300):f>=.1&&(r.stop().fadeIn(600),r.append(u),u.width=u.height=i.size,t.translate(i.size/2,i.size/2),t.rotate((-1/2+i.rotate/180)*Math.PI),e(i.colorProgress,i.colorBackground,i.lineWidth))}}})(jQuery);